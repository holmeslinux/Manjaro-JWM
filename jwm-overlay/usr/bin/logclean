#!/bin/bash
# Remove the logs in /var/log/
# Author: J
# Adaptation: Holmes

main() {
  echo "Do you want to remove the logs in /var/log/?"
  echo "--------------------------------------------"
  echo
  echo "Your options:"
  echo
  echo "1 = Remove"
  echo "2 = Not Remove"
  echo
  echo -n "â–¶ Choose an option and press [Enter] "
  read option
  case $option in
    1) log ;;
    2) exit ;;
    *) echo "Wrong option! Wait and try again..." ; echo ; sleep 2 ; main ;;
  esac
}

log() {
# Backing up current logs
tar -zcvf /tmp/backuplog `date +%d.%m.%y`.tar.gz /var/log

# Move backup file current logs
mv /var/log -name "*.tar.gz" /tmp/backuplog 

# Removes backup files from logs with more than 10 days of creation
find /tmp/backuplog -name "*.tar.gz" -mtime +10 -type f -exec rm {} \;

# Searches all files in /var/log and performs cleanup
  echo
  find /var/log -type f | wc -l
  echo
  echo -e "To find out what the files are press [Enter]!"
  read
  find /var/log -type f | grep -Ev '^.*pacman.log$'
  echo
  echo -e "To remove the files press [Enter]!"
  read
  find /var/log -type f | grep -Ev '^.*pacman.log$' -exec rm {} \;
  echo
  echo -e "Operation complete! To return to SysClean press [Enter]"
  read
}

main
