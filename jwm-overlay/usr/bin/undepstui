#!/bin/bash
#
#SysClean System Cleanup GNU/Linux
#
function help_text() {
	less 	<<-EOF
Welcome to SysClean information page.
SysClean is a script that works with some commands that help clean the system.

ATTENTION
*The number 2, 3, 4, 5 and 6 can break your system. WARNING! USE WITH CAUTION.

e - EXIT SysClean
"clear && exit"
This will exit SysClean.

i - INFORMATION SysClean
Display this information page.

1- LIST ORPHAN PACKAGES
"undesp -l"
List unnecessary system dependencies.

2 - REMOVE ORPHAN BY STAGES
"SysClean -r"
Removes unnecessary dependencies in stages.

3 - REMOVE ORPHAN RECURSIVE
"SysClean -ra"
Remove all unnecessary dependencies at once (recursively).

4 - CLEAN PACKAGE CACHE
"paccache -ruvk1
 paccache -rvk2"
By default Pacman uses this cache direcoty for downloading packages: /var/cache/pacman/pkg/. No cached packages get deleted automatically. This enables you to DOWNGRADE PACKAGES, which are broken, without a working internet connection. The package cache of an old and actively used Manjaro installation can become quite large. Clean it to regain space on your root partition.
The first command removes all packages from cache, which are not installed (anymore) on your system. The second command removes all old packages from your cache except the 2 latest versions: The version you have currently installed on your system and the previous version.

5 - EMPTY PACKAGE CACHE
"yaourt -Scc"
This command will empty your entire package cache by deleting ALL packages.
Attention: This will make it impossible to reinstall or DOWNGRADE PACKAGES without a working internet connection.

6- LOG CLEAN
"sudo /usr/bin/logclean"
The logclean script cleans all system logs.

7 - LIMITED LOG JOURNALCTL
"sudo journalctl --vacuum-size=50M --vacuum-time=30days"
This command limits all log files in journalctl to a combined size of 50 megabytes and a maximum age of 30 days. This leaves plenty of log files behind to analyze systematic and reoccuring errors while preventing excessive amounts of log files.

8 - CLEANING OF THE DAY
"sudo pacman -Sc"
Pacman stores its downloaded packages in /var/cache/pacman/pkg/ and does not remove the old or uninstalled versions automatically, therefore it is necessary to deliberately clean up that folder periodically to prevent such folder to grow indefinitely in size. 

To exit this information page, press "q".
	EOF
}
    while true; do
    clear
    echo ""
    echo -e "                   SysClean System Cleanup GNU/Linux"
    echo ""
    echo -e "                   ✤ Manjaro JWM Community Edition ✤ "
    echo -e " ┌────────────────────────────────────────────────────────────────────────┐"
    echo -e " │    1    List Orphan Packages	          2   *Remove Orphan by Stages    │"
    echo -e " │    3   *Remove Orphan Recursive	  4   *Clean Package Cache        │"
    echo -e " │    5   *Empty Package Cache            6   *Clean Log                  │"
    echo -e " │    7    Limited Log Journalctl         8    Cleaning of the Day        │"
    echo -e " └────────────────────────────────────────────────────────────────────────┘"
    echo -e "       ✓ Select a number and press [Enter] ✓ e Exit ✓ i Information"
    echo ""
    read choix
    case $choix in
        1)
            echo
            /usr/bin/undeps -l
            echo
            echo -e "Operation complete! To return to SysClean press [Enter]"
            read
            ;;
        2)
            echo
            /usr/bin/undeps -r
            echo
            echo -e "Operation complete! To return to SysClean press [Enter]"
            read
            ;;
        3)
            echo
            /usr/bin/undeps -ra
            echo
            echo -e "Operation complete! To return to SysClean press [Enter]"
            read
            ;;
        4)
            echo
            paccache -ruvk1
	    paccache -rvk2
            echo
            echo -e "Operation complete! To return to SysClean press [Enter]"
            read
            ;;
	5)
	    echo
            yaourt -Scc
            echo
            echo -e "Operation complete! To return to SysClean press [Enter]"
            read
            ;;
	6) 
	    echo
	    sudo /usr/bin/logclean
	    echo
            echo -e "Operation complete! To return to SysClean press [Enter]"
            read
            ;;
	7)
            echo
            sudo journalctl --vacuum-size=50M --vacuum-time=30days
            echo
            echo -e "Operation complete! To return to SysClean press [Enter]"
            read
            ;;
	8)
            echo
            sudo pacman -Sc
            echo
            echo -e "Operation complete! To return to SysClean press [Enter]"
            read
            ;;
        e)
            clear && exit
            read
            ;;
        i)
            echo
            help_text
            echo
            ;;
        *)
            echo "Wrong option! Wait and try again..."
            echo ""
            sleep 2
            clear
            ;;
    esac
done
